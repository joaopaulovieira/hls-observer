<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>HLS observer demo</title>
    <meta name="description" content="HLS observer demo">
    <meta name="author" content="JoÃ£o Paulo Vieira">
  </head>
  <body>
    <script type="text/javascript" charset="utf-8" src="hls-observer.js"></script>
    <script>
      const parser = new HLSObserver()

      /* parse a fetch response */
      // fetch('./sample.m3u8').then(response => {
      //  const fetchReader = response.body.getReader()
      //  fetchReader.read().then(buffer => parser.readManifest(buffer))
      // })

      /* fetch and parse one manifest */
      parser.fetchAndParse('./sample.m3u8').then(manifest => {
        const linesArray = manifest.split('\n')
        const customizedLinesArray = manifest.replace(/.m3u8\n/g, '.m3u8 - ').split('\n')
        const itemsArray = manifest.replace(/\n/g, ',').split(',')

        console.log('>>>>>> manifest:', `\n\n${manifest}\n\n`) // eslint-disable-line no-console
        console.log('>>>>>> array of manifest lines:', linesArray) // eslint-disable-line no-console
        console.log('>>>>>> array of manifest items:', itemsArray) // eslint-disable-line no-console
        customizedLinesArray.forEach((line, iterator) => console.log(`Line ${++iterator}: ${line}`)) // eslint-disable-line
      })
    </script>
  </body>
</html>